<div class="container">
  <div class="row">


<div class="col-md-4">
<h1>User info</h1>
<div>
  <%= flash[:notice] %>
</div>

<% if @book.errors.any? %>
  <% if @book.errors.count==1 %>
    <h3>An error has occurred.</h3>
  <%else%>
    <h3><%= @book.errors.count %>error has occurred.</h3>
  <%end%>
  <ul>
    <% @book.errors.full_messages.each do |message| %>
      <li><%= message %></li>
    <% end %>
  </ul>
<% end %>

<%= image_tag @user.get_profile_image(100,100) %>
<table class="table">
  <tr class="col">
    <th>name</th><td><%= @user.name %></td>
  </tr>
  <tr>
    <th>introduction </th>
    <td><% int=@user.introduction %>
        <% if int.present? %>
          <%= int %>
        <% end %></td>
  </tr>
</table>

<div>
<%= link_to edit_user_path(@user.id),class:"btn btn-secondary" do%>
  <i class="fas fa-user-cog"></i>
<%end%>
</div>

<div>
<h1>New book</h1>
<% new_book=Book.new %>
<%= form_with model:new_book, url:books_path, method: :post do |f| %>
  <p>Title</p>
  <%= f.text_field:title %>
  <p>opinion</p>
  <%=f.text_area :body%>
  <button class="btn p-1 mb-2 btn-success text-white" type="submit">Create Book</button>
<%end%>
</div>
</div>


<div class="col-md-8">
  <h1>Books</h1>
  <table class="table">
    <tr>
      <th class="col"></th>
      <th>Title</th>
      <th>Opinion</th>
    </tr>
    <% @books.each do |abook| %>
      <tr height="20">
        <th scope="row">
          <%= link_to user_path(abook.user_id) do %>
          <%= image_tag(abook.user.get_profile_image(50,50)) %>
        <%end%>
        </th>
        <td><%= link_to "#{abook.title}", book_path(abook.id) %></td>
        <td><%= abook.body %></td>
      </tr>
    <% end %>
  </table>
</div>


</div>
</div>